{{ $with_all_link := .Get "last_slide_link" }}
<!-- slider code -->
<section id="testimonials" class="section-testimonials">
    <h2>Here's what our users are saying</h2>
    <div class="testimonial-slider-container row">
        <div class="full-width-testimonial-icon">
            <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
            width="41px" height="34px" viewBox="-235 240 41 34" style="enable-background:new -235 240 41 34;" xml:space="preserve">
                <path class="quote-path" d="M-231.3,260.4c0-5,1.3-8.8,3.7-11.7c2.4-2.8,6-4.6,10.5-5.5v5c-3.5,1-6,2.8-7.1,5.5c-0.7,1.4-0.9,2.8-0.8,4
                h8.1v12.8h-14.4V260.4z"/>
                <path class="quote-path" d="M-212,260.4c0-5,1.3-8.8,3.7-11.7c2.4-2.8,6-4.6,10.5-5.5v5c-3.5,1-6,2.8-7.1,5.5c-0.7,1.4-0.9,2.8-0.8,4h8.1
                v12.8H-212V260.4z"/>
            </svg>
        </div>
        {{ $main_testimonials := (sort (where $.Site.Data.testimonials "main" true) "main_order") }}
        {{ range $index, $item := $main_testimonials }}    
        <div class="testimonial-slide" {{if (eq $index 0) }}style="display: block;"{{end}}>
            <p class="full-width-testimonial-source">{{ $item.review_title | safeHTML }}</p>
            <span class="full-width-testimonial-source-context">{{$item.reviewer}}, <i>{{$item.title}}</i></span>
            <h5 class="full-width-testimonial-text">{{ $item.review | safeHTML }}</h5>
        </div>
        {{ end }}

        {{ if $with_all_link }}
        <div class="testimonial-slide">
            <div class="see-all-section">
                <a class="links" href="/testimonials/" target="_blank">See all reviews</a>
            </div>
        </div>
        {{ end }}

        <a class="prev" onclick="plusSlides(-1)"><svg xmlns="http://www.w3.org/2000/svg" width="11" height="18"><path class="path-arrow" fill="none" stroke="#9297A1" stroke-width="2" d="M1 1.929L8.071 9 1 16.071"/></svg></a>
        <a class="next" onclick="plusSlides(1)"><svg xmlns="http://www.w3.org/2000/svg" width="11" height="18"><path class="path-arrow" fill="none" stroke="#9297A1" stroke-width="2" d="M1 1.929L8.071 9 1 16.071"/></svg></a>
    </div>
    <div class="dot-container row">
        {{ range $index, $item := $main_testimonials }}
        <span class="dot {{if (eq $index 0) }}active{{end}}" onclick="currentSlide({{ add $index 1 }});"></span>
        {{ end }}

        {{ if $with_all_link }}
        <span class="dot" onclick="currentSlide({{ add (len $main_testimonials) 1 }});"></span>
        {{ end }}
      </div>
    <!-- slider close -->
</section>
  